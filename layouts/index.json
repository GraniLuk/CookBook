{{- $.Scratch.Set "index" slice -}}
{{- range .Site.RegularPages -}}
  {{- if not (in .Params.categories "sosy") -}}
    {{- $img := partial "asset-url.html" (or site.Params.front.defaultImage "/images/defaultImage.avif") -}}
    {{- if and .Params.recipe_image (fileExists (printf "static/%s" .Params.recipe_image)) -}}
      {{- $img = partial "asset-url.html" (printf "/%s" .Params.recipe_image) -}}
    {{- end -}}
    {{- $.Scratch.Add "index" (dict
      "title"        .Title
      "tags"         .Params.tags
      "categories"   .Params.categories
      "ingredients"  .Params.ingredients
      "contents"     .Plain
      "permalink"    .Permalink
      "imageLink"    $img
      "calories"     .Params.calories
      "protein"      .Params.protein
      "fat"          .Params.fat
      "carbohydrate" .Params.carbohydrate
      "draft"        (default false .Draft)
      "readyToTest"  (default false .Params.readyToTest)
    ) -}}
  {{- end -}}
{{- end -}}
{{- $.Scratch.Get "index" | jsonify -}}