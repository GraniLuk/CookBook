<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light only">

    <link rel="apple-touch-icon" sizes="180x180" href="{{ partial "asset-url.html" "/apple-touch-icon.png" }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ partial "asset-url.html" "/favicon-32x32.png" }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ partial "asset-url.html" "/favicon-16x16.png" }}">
    <link rel="icon" href="{{ partial "asset-url.html" "/favicon.ico" }}" sizes="any">
    <link rel="manifest" href="{{ partial "asset-url.html" "/site.webmanifest" }}">
    {{/* Tailwind CSS + DaisyUI - primary styling framework */}}
    {{ with resources.Get "css/main.css" }}
      {{ $opts := dict "minify" true }}
      {{ with . | css.TailwindCSS $opts }}
        <link rel="stylesheet" href="{{ .RelPermalink }}">
      {{ end }}
    {{ end }}
    {{/* Legacy styles for components not yet migrated to Tailwind */}}
    <link rel="stylesheet" type="text/css" href="{{ partial "asset-url.html" "/css/tags.css" }}">
    <link rel="stylesheet" type="text/css" href="{{ partial "asset-url.html" "/css/custom.css" }}">
    <link rel="stylesheet" type="text/css" href="{{ partial "asset-url.html" "/css/print.css" }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Force light mode - disable dark mode until we're ready */
        :root {
            color-scheme: light only !important;
        }
        
        .recipe-status-icons {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 10;
        }
    </style>
    {{ $title := print .Site.Title " | " .Title }}
    {{ if .IsHome }}{{ $title = .Site.Title }}{{ end }}
    <title>{{ $title }}</title>
    {{ if .Site.Params.googleAnalytics }}
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ .Site.Params.googleAnalytics }}" crossorigin="anonymous"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', '{{ .Site.Params.googleAnalytics }}');
    </script>
    {{ end }}
    <script>window.baseUrl = '{{ (urls.Parse site.BaseURL).Path | strings.TrimSuffix "/" }}';</script>
            {{ if in (default (slice) .Params.diets) "low-fodmap" }}
                {{ $kw := (slice "low fodmap") }}
                {{ with .Params.tags }}{{ $kw = $kw | append . }}{{ end }}
                <meta name="keywords" content="{{ delimit $kw ", " }}">
            {{/* Basic JSON-LD augmentation: add additionalProperty for lowFODMAP if recipe schema exists elsewhere; otherwise embed minimal */}}
            <script type="application/ld+json">
                        {{ $status := "" }}
                        {{ $desc := "" }}
                        {{ if and (isset .Params "fodmap") (isset .Params.fodmap "status") }}
                            {{ $status = .Params.fodmap.status }}
                        {{ end }}
                        {{ if and (isset .Params "fodmap") (isset .Params.fodmap "notes") }}
                            {{ $desc = .Params.fodmap.notes }}
                        {{ end }}
            {
                "@context": "https://schema.org",
                "@type": "Recipe",
                "name": {{ printf "%q" .Title }},
                "additionalProperty": [{
                    "@type": "PropertyValue",
                    "name": "lowFODMAP",
                    "value": {{ printf "%q" $status }},
                    "description": {{ printf "%q" $desc }}
                }]
            }
            </script>
        {{ end }}
</head>
