<a href="{{ .Permalink }}" class="block h-full no-underline text-inherit" data-recipe-slug="{{ .File.ContentBaseName }}">
    <div class="card bg-base-100 shadow-md hover:shadow-xl h-full flex flex-col cursor-pointer transition-all duration-200 hover:-translate-y-1 rounded-2xl overflow-hidden">
        <figure class="relative aspect-square w-full">
            {{- $image_url := partial "asset-url.html" "/images/defaultImage.avif" -}}
            {{- if and .Params.recipe_image (fileExists (printf "static/%s" .Params.recipe_image)) -}}
                {{- $image_url = partial "asset-url.html" (printf "/%s" .Params.recipe_image) -}}
            {{- end -}}
            <img class="rounded-t-2xl w-full h-full object-cover" src="{{ $image_url }}" alt="ZdjÄ™cie przepisu">
                {{- if .Params.queued -}}
                <div class="priority-badge">
                    {{- $priority := default 1 .Params.priority -}}
                    {{- range seq $priority -}}<i class="fas fa-star"></i>{{- end -}}
                </div>
                {{- end -}}
                {{/* Rating badge - top left */}}
                {{ partial "rating-badge.html" . }}
                {{ with .Params.tags }}
                <div class="card-tags-overlay">
                    {{ range . }}<span class="recipe-tag tag-link" data-tag="{{ . | urlize }}">#{{ . }}</span>{{ end }}
                </div>
                {{ end }}
            </figure>
        </figure>
        <div class="card-body flex-grow flex flex-col p-4">
            <div class="flex items-center justify-between gap-2 h-[4.5em]">
                <p class="text-lg font-heading font-bold text-center flex-1 m-0 line-clamp-2">{{ $.Title }}</p>
                <span class="fodmap-indicator flex-shrink-0">
                                                                {{ $isLow := in (default (slice) $.Params.diets) "low-fodmap" }}
                                                                {{ $status := "" }}
                                                                {{ if and (isset $.Params "fodmap") (isset $.Params.fodmap "status") }}
                                                                    {{ $status = $.Params.fodmap.status }}
                                                                {{ end }}
                                                                {{ if or $isLow (ne $status "") }}
                                                                        {{ $mod := "" }}
                                                                        {{ if eq $status "yes" }}{{ $mod = " fodmap--yes" }}{{ end }}
                                                                        {{ if eq $status "depends" }}{{ $mod = " fodmap--depends" }}{{ end }}
                                                                        {{ if eq $status "no" }}{{ $mod = " fodmap--no" }}{{ end }}
                                                                        <span class="fodmap-badge{{ $mod }}" title="Low FODMAP">
                                                                                <i class="fas fa-leaf" aria-hidden="true"></i>
                                                                        </span>
                                                                {{ end }}
                                                                </span>
            </div>
            <div class="flex-grow flex flex-col">
                <div class="h-12 flex justify-center items-center mt-1">
                    <div class="flex flex-wrap gap-3 text-sm items-center justify-center">
                        <span class="flex items-center gap-1">
                            <i class="fas fa-fire" style="color: #ff6b35;"></i><strong>{{ $.Params.calories }}</strong> kcal
                        </span>
                        <span class="flex items-center gap-1">
                            <i class="fas fa-dumbbell" style="color: #4ecdc4;"></i><strong>{{ $.Params.protein }}g</strong>
                        </span>
                        <span class="flex items-center gap-1">
                            <i class="fas fa-droplet" style="color: #687935;"></i><strong>{{ $.Params.fat }}g</strong>
                        </span>
                        <span class="flex items-center gap-1">
                            <i class="fas fa-wheat-awn" style="color: #f9ca24;"></i><strong>{{ $.Params.carbohydrate }}g</strong>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</a>
